{"version":3,"file":"instanced-mesh.directive.js","sourceRoot":"","sources":["../../../../../../../packages/core/meshes/src/lib/instanced-mesh/instanced-mesh.directive.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,6BAA6B,EAC7B,SAAS,EACT,aAAa,GACd,MAAM,qBAAqB,CAAC;AAC7B,OAAO,EAAE,SAAS,EAAE,KAAK,EAAa,MAAM,eAAe,CAAC;AAC5D,OAAO,EAAE,gBAAgB,EAAE,aAAa,EAAE,MAAM,OAAO,CAAC;;AAaxD,MAAM,OAAO,sBACX,SAAQ,SAAwB;IAZlC;;QAmBE,aAAQ,GAAG,aAAa,CAAC;QAWzB,cAAS,GAAG,GAAG,EAAE;YACf,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QAC1D,CAAC,CAAC;KACH;IAlBC,IAAa,IAAI,CAAC,CAAW;QAC3B,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;IACrB,CAAC;IAID,WAAW;QACT,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,KAAK,CAAC,WAAW,EAAE,CAAC;IACtB,CAAC;IAES,SAAS;QACjB,OAAO,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC;IACzC,CAAC;;oHAjBU,sBAAsB;wGAAtB,sBAAsB,uEARtB;QACT;YACE,OAAO,EAAE,aAAa;YACtB,WAAW,EAAE,sBAAsB;SACpC;QACD,6BAA6B;KAC9B;4FAEU,sBAAsB;kBAXlC,SAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,QAAQ,EAAE,kBAAkB;oBAC5B,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,aAAa;4BACtB,WAAW,wBAAwB;yBACpC;wBACD,6BAA6B;qBAC9B;iBACF;8BAKc,IAAI;sBAAhB,KAAK","sourcesContent":["import {\n  OBJECT_3D_CONTROLLER_PROVIDER,\n  ThreeMesh,\n  ThreeObject3d,\n} from '@angular-three/core';\nimport { Directive, Input, OnChanges } from '@angular/core';\nimport { DynamicDrawUsage, InstancedMesh } from 'three';\n\n@Directive({\n  selector: 'ngt-instanced-mesh',\n  exportAs: 'ngtInstancedMesh',\n  providers: [\n    {\n      provide: ThreeObject3d,\n      useExisting: InstancedMeshDirective,\n    },\n    OBJECT_3D_CONTROLLER_PROVIDER,\n  ],\n})\nexport class InstancedMeshDirective\n  extends ThreeMesh<InstancedMesh>\n  implements OnChanges\n{\n  @Input() set args(v: [number]) {\n    this.extraArgs = v;\n  }\n\n  meshType = InstancedMesh;\n\n  ngOnChanges() {\n    this.init();\n    super.ngOnChanges();\n  }\n\n  protected canCreate(): boolean {\n    return !this.object3d && this.geometry;\n  }\n\n  customize = () => {\n    this.object3d.instanceMatrix.setUsage(DynamicDrawUsage);\n  };\n}\n"]}