{"version":3,"file":"make-id.util.js","sourceRoot":"","sources":["../../../../../../packages/core/src/lib/utils/make-id.util.ts"],"names":[],"mappings":"AAEA;;;;;;;GAOG;AACH,MAAM,UAAU,MAAM,CAAC,KAAyB;IAC9C,IAAI,KAAK,EAAE;QACT,OAAO,CAAC,KAAK,CAAC,WAAW,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC;KACrE;IAED,OAAO,EAAE,EAAE,CAAC;AACd,CAAC;AAED,MAAM,KAAK,GAA0C,EAAE,CAAC;AAExD;;;;;;;;;GASG;AACH,MAAM,UAAU,EAAE;IAChB,IAAI,KAAK,GAAG,CACV,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAC/D,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAEZ,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;IAEpB,0BAA0B;IAC1B,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;QACjB,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;QACpB,OAAO,KAAK,CAAC;KACd;IAED,OAAO,EAAE,EAAE,CAAC;AACd,CAAC","sourcesContent":["import type { ThreeIntersection } from '../typings';\n\n/**\n * Generate a random Id or an Event's uuid\n *\n * @param {ThreeIntersection} event\n *\n * @internal\n * @private\n */\nexport function makeId(event?: ThreeIntersection) {\n  if (event) {\n    return (event.eventObject || event.object).uuid + '/' + event.index;\n  }\n\n  return id();\n}\n\nconst cache: { [id: string]: boolean | undefined } = {};\n\n/**\n * Generates a short id.\n *\n * Description:\n *  A 5-character alphanumeric sequence (364 = 1.6 million)\n *  This should only be used for JavaScript specific models.\n *  http://stackoverflow.com/questions/6248666/how-to-generate-short-uid-like-ax4j9z-in-js\n *\n *  Example: `aebgf`\n */\nexport function id(): string {\n  let newId = (\n    '0000' + ((Math.random() * Math.pow(36, 4)) << 0).toString(36)\n  ).slice(-4);\n\n  newId = `a${newId}`;\n\n  // ensure not already used\n  if (!cache[newId]) {\n    cache[newId] = true;\n    return newId;\n  }\n\n  return id();\n}\n"]}