{"version":3,"file":"instances.store.js","sourceRoot":"","sources":["../../../../../../packages/core/src/lib/stores/instances.store.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAG3C,OAAO,EAAE,wBAAwB,EAAE,MAAM,uCAAuC,CAAC;;AAGjF,MAAM,OAAO,cAAe,SAAQ,wBAA6C;IAC/E;QACE,KAAK,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,gBAAgB,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;QAGrD,iBAAY,GAAG,IAAI,CAAC,OAAO,CAGjC,CAAC,KAAK,EAAE,EAAE,QAAQ,EAAE,EAAE,GAAG,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,iCAC3C,KAAK,KACR,SAAS,kCAAO,KAAK,CAAC,SAAS,KAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,OAC/C,CAAC,CAAC;QAEK,mBAAc,GAAG,IAAI,CAAC,OAAO,CAAS,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;YAC3D,MAAkC,KAAA,KAAK,CAAC,SAAS,EAAzC,KAAC,EAAG,EAAE,CAAC,SAAA,EAAK,SAAS,cAAvB,uCAAyB,CAAkB,CAAC;YAElD,uCACK,KAAK,KACR,SAAS,IACT;QACJ,CAAC,CAAC,CAAC;QAEM,uBAAkB,GAAG,IAAI,CAAC,OAAO,CAGvC,CAAC,KAAK,EAAE,EAAE,cAAc,EAAE,EAAE,GAAG,cAAc,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,iCACvD,KAAK,KACR,gBAAgB,kCAAO,KAAK,CAAC,gBAAgB,KAAE,CAAC,EAAE,CAAC,EAAE,cAAc,OACnE,CAAC,CAAC;QAEK,yBAAoB,GAAG,IAAI,CAAC,OAAO,CAAS,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;YACjE,MAAyC,KAAA,KAAK,CAAC,gBAAgB,EAAvD,KAAC,EAAG,EAAE,CAAC,SAAA,EAAK,gBAAgB,cAA9B,uCAAgC,CAAyB,CAAC;YAEhE,uCACK,KAAK,KACR,gBAAgB,IAChB;QACJ,CAAC,CAAC,CAAC;QAEM,eAAU,GAAG,IAAI,CAAC,OAAO,CAAgB,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE,CAAC,iCAC7D,KAAK,KACR,OAAO,kCAAO,KAAK,CAAC,OAAO,KAAE,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,OAC5C,CAAC,CAAC;QAEK,iBAAY,GAAG,IAAI,CAAC,OAAO,CAAS,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;YACzD,MAAgC,KAAA,KAAK,CAAC,OAAO,EAArC,KAAC,EAAG,EAAE,CAAC,SAAA,EAAK,OAAO,cAArB,uCAAuB,CAAgB,CAAC;YAC9C,uCAAY,KAAK,KAAE,OAAO,IAAG;QAC/B,CAAC,CAAC,CAAC;IA5CH,CAAC;;4GAHU,cAAc;gHAAd,cAAc;4FAAd,cAAc;kBAD1B,UAAU","sourcesContent":["import { Injectable } from '@angular/core';\nimport type { BufferGeometry, Material } from 'three';\nimport type { InstancesStoreState, ThreeInstance } from '../typings';\nimport { ImperativeComponentStore } from './imperative-component-store.abstract';\n\n@Injectable()\nexport class InstancesStore extends ImperativeComponentStore<InstancesStoreState> {\n  constructor() {\n    super({ materials: {}, bufferGeometries: {}, objects: {} });\n  }\n\n  readonly saveMaterial = this.updater<{\n    material: Material;\n    id?: string;\n  }>((state, { material, id = material.uuid }) => ({\n    ...state,\n    materials: { ...state.materials, [id]: material },\n  }));\n\n  readonly removeMaterial = this.updater<string>((state, id) => {\n    const { [id]: _, ...materials } = state.materials;\n\n    return {\n      ...state,\n      materials,\n    };\n  });\n\n  readonly saveBufferGeometry = this.updater<{\n    bufferGeometry: BufferGeometry;\n    id?: string;\n  }>((state, { bufferGeometry, id = bufferGeometry.uuid }) => ({\n    ...state,\n    bufferGeometries: { ...state.bufferGeometries, [id]: bufferGeometry },\n  }));\n\n  readonly removeBufferGeometry = this.updater<string>((state, id) => {\n    const { [id]: _, ...bufferGeometries } = state.bufferGeometries;\n\n    return {\n      ...state,\n      bufferGeometries,\n    };\n  });\n\n  readonly saveObject = this.updater<ThreeInstance>((state, obj) => ({\n    ...state,\n    objects: { ...state.objects, [obj.uuid]: obj },\n  }));\n\n  readonly removeObject = this.updater<string>((state, id) => {\n    const { [id]: _, ...objects } = state.objects;\n    return { ...state, objects };\n  });\n}\n"]}