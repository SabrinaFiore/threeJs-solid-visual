{"version":3,"file":"texture.abstract.js","sourceRoot":"","sources":["../../../../../../packages/core/src/lib/abstracts/texture.abstract.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,EAAqB,MAAM,eAAe,CAAC;;AAKrE,MAAM,OAAgB,YAAY;IAKhC,YAA6B,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;QAEnC,eAAU,GAAc,EAAE,CAAC;IAFW,CAAC;IAI/C,IAAc,SAAS,CAAC,CAAY;QAClC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE;YACjC,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;QAC3D,CAAC,CAAC,CAAC;IACL,CAAC;IAID,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE;YACjC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjB,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;aAC1D;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,WAAW;QACT,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE;YACjC,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;aACxB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;;0GApCmB,YAAY;8FAAZ,YAAY;4FAAZ,YAAY;kBADjC,SAAS","sourcesContent":["import { Directive, NgZone, OnDestroy, OnInit } from '@angular/core';\nimport { Texture } from 'three';\nimport type { AnyConstructor } from '../typings';\n\n@Directive()\nexport abstract class ThreeTexture<TTexture extends Texture = Texture>\n  implements OnInit, OnDestroy\n{\n  abstract textureType: AnyConstructor<TTexture>;\n\n  constructor(private readonly ngZone: NgZone) {}\n\n  private _extraArgs: unknown[] = [];\n\n  protected set extraArgs(v: unknown[]) {\n    this._extraArgs = v;\n    this.ngZone.runOutsideAngular(() => {\n      this._texture = new this.textureType(...this._extraArgs);\n    });\n  }\n\n  private _texture?: TTexture;\n\n  ngOnInit() {\n    this.ngZone.runOutsideAngular(() => {\n      if (!this.texture) {\n        this._texture = new this.textureType(...this._extraArgs);\n      }\n    });\n  }\n\n  get texture(): TTexture | undefined {\n    return this._texture;\n  }\n\n  ngOnDestroy() {\n    this.ngZone.runOutsideAngular(() => {\n      if (this.texture) {\n        this.texture.dispose();\n      }\n    });\n  }\n}\n"]}